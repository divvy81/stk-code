(* TODO : add levels between High and Medium and Medium and Low for each parameter ... *)
(* FCL File Created From FFLL Model. Used to evaluate the level of the player by using the player average  rank and the number of crash of the player*)

FUNCTION_BLOCK

VAR_INPUT
    Player_average_rank       REAL; (* RANGE(0 .. 12) *) 
    Player_number_of_craches  REAL; (* RANGE(0 .. 10) *) 
END_VAR

VAR_OUTPUT
    Player_level              REAL; (* RANGE(0 .. 4) *) 
END_VAR

FUZZIFY Player_average_rank
    TERM High   := (0  , 0) (  0 , 1) ( 3, 0) ;
    TERM Medium := (2.5, 0) ( 4.8, 1) ( 7.8, 0) ;
    TERM Low    := (7.5, 0) (10  , 1) (10, 0) ;
END_FUZZIFY

FUZZIFY Player_number_of_craches
    TERM Low    := (0, 0) (0  , 1) ( 1.5, 0) ;
    TERM Medium := (1, 0) (2.5, 1) ( 3.5, 0) ;
    TERM High   := (3, 0) (5  , 1) (10  , 0) ;
END_FUZZIFY

FUZZIFY Player_level
    TERM Good    := 1 ;
    TERM Average := 2 ;
    TERM Bad     := 3 ;
END_FUZZIFY

DEFUZZIFY valve
    METHOD: MoM;
END_DEFUZZIFY

RULEBLOCK first
    AND:MIN;
    ACCUM:MAX;
    (*        |Av.Rank   |CrashCount |Output        *)
    (*--------|----------|-----------|--------------*)
    RULE 0: IF High   AND Low    THEN Good;
    RULE 1: IF High   AND Medium THEN Good;
    RULE 2: IF High   AND High   THEN Average;
    RULE 3: IF Medium AND Low    THEN Average;
    RULE 4: IF Medium AND Medium THEN Average;
    RULE 5: IF Medium AND High   THEN Bad;
    RULE 6: IF Low    AND Low    THEN Bad;
    RULE 7: IF Low    AND Medium THEN Bad;
    RULE 8: IF Low    AND High   THEN Bad;
END_RULEBLOCK

END_FUNCTION_BLOCK
